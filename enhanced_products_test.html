<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Products Test - RetailFlowAI</title>
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        .product-card {
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease;
        }
        .product-card:hover {
            transform: translateY(-5px);
        }
        .product-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        .product-emoji {
            font-size: 2em;
            margin-right: 15px;
        }
        .product-title {
            flex: 1;
        }
        .product-title h3 {
            margin: 0;
            color: #2c3e50;
        }
        .product-title p {
            margin: 5px 0;
            color: #666;
        }
        .product-images {
            margin: 15px 0;
        }
        .main-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 10px;
        }
        .image-thumbnails {
            display: flex;
            gap: 5px;
            overflow-x: auto;
        }
        .image-thumbnails img {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 5px;
            cursor: pointer;
            border: 2px solid transparent;
        }
        .image-thumbnails img:hover {
            border-color: #667eea;
        }
        .colors-section {
            margin: 15px 0;
        }
        .colors-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        .color-swatches {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        .color-swatch {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        .color-swatch:hover {
            transform: scale(1.2);
        }
        .sizes-section {
            margin: 15px 0;
        }
        .sizes-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        .size-options {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        .size-option {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }
        .size-option:hover {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        .product-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        .btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .ar-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        .ar-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        .cart-btn {
            background: #28a745;
            color: white;
        }
        .cart-btn:hover {
            background: #218838;
            transform: translateY(-2px);
        }
        .price-display {
            font-size: 1.5em;
            font-weight: bold;
            color: #e74c3c;
            text-align: center;
            margin: 15px 0;
        }
        .features-list {
            list-style: none;
            padding: 0;
            margin: 15px 0;
        }
        .features-list li {
            padding: 5px 0;
            border-bottom: 1px solid #eee;
        }
        .load-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            margin: 20px auto;
            display: block;
            transition: all 0.3s ease;
        }
        .load-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        .status {
            text-align: center;
            padding: 20px;
            font-size: 1.2em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üõçÔ∏è Enhanced Products Test - RetailFlowAI</h1>
        <p style="text-align: center; font-size: 1.2em;">
            Testing Enhanced AR Products with Colors, Sizes, and Multiple Images
        </p>
        
        <button class="load-btn" onclick="loadEnhancedProducts()">
            üöÄ Load Enhanced Products
        </button>
        
        <div id="status" class="status">
            Click the button above to load enhanced products with AR features!
        </div>
        
        <div id="products-container" class="products-grid">
            <!-- Products will be loaded here -->
        </div>
    </div>

    <script>
        async function loadEnhancedProducts() {
            const statusDiv = document.getElementById('status');
            const container = document.getElementById('products-container');
            
            try {
                statusDiv.innerHTML = '‚è≥ Loading enhanced products...';
                
                const response = await fetch('http://localhost:5000/api/products');
                const data = await response.json();
                
                if (data.success && data.products) {
                    const enhancedProducts = data.products.filter(product => 
                        product.colors && product.colors.length > 0
                    );
                    
                    if (enhancedProducts.length === 0) {
                        statusDiv.innerHTML = '‚ö†Ô∏è No enhanced products found. Run add_enhanced_products.py first!';
                        return;
                    }
                    
                    statusDiv.innerHTML = `‚úÖ Loaded ${enhancedProducts.length} enhanced products with AR features!`;
                    
                    container.innerHTML = enhancedProducts.map(product => `
                        <div class="product-card">
                            <div class="product-header">
                                <div class="product-emoji">${product.emoji}</div>
                                <div class="product-title">
                                    <h3>${product.name}</h3>
                                    <p>üè∑Ô∏è ${product.brand} ‚Ä¢ ‚≠ê ${product.rating}/5</p>
                                </div>
                            </div>
                            
                            <div class="product-images">
                                <img src="${product.images ? product.images[0] : product.image_url}" 
                                     alt="${product.name}" class="main-image" 
                                     onclick="changeMainImage(this, ${JSON.stringify(product.images).replace(/"/g, '&quot;')})">
                                ${product.images && product.images.length > 1 ? `
                                    <div class="image-thumbnails">
                                        ${product.images.map(img => `
                                            <img src="${img}" alt="View" 
                                                 onclick="changeMainImage(this.parentElement.previousElementSibling, ['${img}'])">
                                        `).join('')}
                                    </div>
                                ` : ''}
                            </div>
                            
                            <div class="price-display">$${product.price}</div>
                            
                            ${product.colors && product.colors.length > 0 ? `
                                <div class="colors-section">
                                    <div class="colors-title">üé® Available Colors (${product.colors.length})</div>
                                    <div class="color-swatches">
                                        ${product.colors.map(color => `
                                            <div class="color-swatch" 
                                                 style="background-color: ${color.hex}"
                                                 title="${color.name}"
                                                 onclick="changeProductColor(this, '${color.image}', '${color.name}')">
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            ` : ''}
                            
                            ${product.sizes && product.sizes.length > 0 ? `
                                <div class="sizes-section">
                                    <div class="sizes-title">üìè Available Sizes (${product.sizes.length})</div>
                                    <div class="size-options">
                                        ${product.sizes.map(size => `
                                            <div class="size-option" 
                                                 title="${size.measurements}"
                                                 onclick="selectSize(this, '${size.name}', ${size.price_modifier})">
                                                ${size.name}
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            ` : ''}
                            
                            <ul class="features-list">
                                <li>üì¶ Category: ${product.category}</li>
                                <li>üè™ Stock: ${product.stock_quantity} available</li>
                                <li>üè∑Ô∏è Tags: ${product.tags}</li>
                                <li>üòä Mood: ${product.mood_category}</li>
                                ${product.ar_enabled ? '<li>ü•Ω AR Ready: Yes</li>' : '<li>ü•Ω AR Ready: No</li>'}
                            </ul>
                            
                            <div class="product-actions">
                                ${product.ar_enabled ? `
                                    <button class="btn ar-btn" onclick="openARView('${product.name}')">
                                        ü•Ω Try in AR
                                    </button>
                                ` : ''}
                                <button class="btn cart-btn" onclick="addToCart('${product.name}')">
                                    üõí Add to Cart
                                </button>
                            </div>
                        </div>
                    `).join('');
                } else {
                    throw new Error('Failed to load products');
                }
            } catch (error) {
                statusDiv.innerHTML = `‚ùå Error: ${error.message}`;
                console.error('Error loading products:', error);
            }
        }
        
        function changeMainImage(mainImg, images) {
            if (images && images.length > 0) {
                mainImg.src = images[0];
            }
        }
        
        function changeProductColor(colorSwatch, colorImage, colorName) {
            // Remove previous selection
            document.querySelectorAll('.color-swatch').forEach(swatch => {
                swatch.style.transform = '';
            });
            
            // Highlight selected color
            colorSwatch.style.transform = 'scale(1.3)';
            
            // Change main image to color variant
            const mainImage = colorSwatch.closest('.product-card').querySelector('.main-image');
            if (colorImage) {
                mainImage.src = colorImage;
            }
            
            // Show notification
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed; top: 20px; right: 20px; 
                background: #28a745; color: white; padding: 10px 20px; 
                border-radius: 5px; z-index: 1000;
            `;
            notification.textContent = `Color changed to ${colorName}`;
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 2000);
        }
        
        function selectSize(sizeOption, sizeName, priceModifier) {
            // Remove previous selection
            sizeOption.parentElement.querySelectorAll('.size-option').forEach(opt => {
                opt.style.background = '#f8f9fa';
                opt.style.color = '#333';
                opt.style.borderColor = '#dee2e6';
            });
            
            // Highlight selected size
            sizeOption.style.background = '#667eea';
            sizeOption.style.color = 'white';
            sizeOption.style.borderColor = '#667eea';
            
            // Update price if needed
            const priceDisplay = sizeOption.closest('.product-card').querySelector('.price-display');
            const basePrice = parseFloat(priceDisplay.textContent.replace('$', ''));
            const newPrice = (basePrice + priceModifier).toFixed(2);
            priceDisplay.textContent = `$${newPrice}`;
            
            // Show notification
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed; top: 20px; right: 20px; 
                background: #007bff; color: white; padding: 10px 20px; 
                border-radius: 5px; z-index: 1000;
            `;
            notification.textContent = `Size selected: ${sizeName}`;
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 2000);
        }
        
        function openARView(productName) {
            alert(`ü•Ω Opening AR View for: ${productName}\n\nThis would launch the enhanced AR experience with:\n‚Ä¢ Color selection in AR\n‚Ä¢ Size visualization\n‚Ä¢ 360¬∞ product view\n‚Ä¢ Virtual try-on technology`);
        }
        
        function addToCart(productName) {
            alert(`üõí Added to cart: ${productName}\n\n‚úÖ Product added successfully!`);
        }
    </script>
</body>
</html>
